!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,o,n){Object.defineProperty(e,t,{get:o,set:n,enumerable:!0,configurable:!0})}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},i=o.parcelRequired44e;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},o.parcelRequired44e=i),i.register("kcj9K",(function(o,n){t(o.exports,"BlocklyInterface",(function(){return s}));var r=i("16nQR"),c=i("3rELp"),a=i("1WSnx"),l=i("aQJSr");const s=function(){createCustomBlocks();const t=document.querySelector("#printVal");window.interpreter=null,window.runner=null,window.latestCode="",window.editorMode="block",window.highlightPause=!1;let{cat_logic:o,cat_loops:n,cat_math:i,cat_sep:s,cat_data:u,cat_vars:w,cat_list:d}=c.Categories,p=new(0,r.Toolbox)([o,n,i,s,u,w,d]);window.workspace=Blockly.inject("blocklyDiv",{media:"https://unpkg.com/browse/blockly/media/",toolbox:p.toString()});window.workspace.registerToolboxCategoryCallback("DATA",(e=>(e=>{let t=[];return e.forEach((e=>{let o=(0,r.unwind)([e],!0);o=Blockly.Xml.textToDom(o).firstChild,t.push(o)})),t})(["plot_raw","getRaw","removeSignalMean","getabsdata","filter_signal"]))),Blockly.JavaScript.addReservedWords("exit"),window.resetInterpreter=function(){window.interpreter=null,window.workspace.highlightBlock(null),window.runner&&(clearTimeout(window.runner),window.runner=null)},window.generateCodeAndLoadIntoInterpreter=function(){Blockly.JavaScript.STATEMENT_PREFIX="highlightBlock(%1);\n",Blockly.JavaScript.addReservedWords("highlightBlock"),window.latestCode=Blockly.JavaScript.workspaceToCode(window.workspace);Blockly.Xml.workspaceToDom(window.workspace)};let y=t=>t.properties?e(a).values(t.properties):t,f=(e,t,o)=>{e.properties?(e.properties=t,o(e)):o(t)};window.initApi=function(o,n){var r=async function(e,t,o,n){try{let r=y(e),i=await l.blocklyHooks.filterSignalHook(r,t,o);f(e,i,n)}catch(e){return e}};o.setProperty(n,"filterSignal",o.createAsyncFunction(r));r=async function(e,t){try{let o=y(e),n=await l.blocklyHooks.getAbsValueHook(o);f(e,n,t)}catch(e){return e}};o.setProperty(n,"getAbsVals",o.createAsyncFunction(r));r=async function(e,t){try{let o=y(e),n=await l.blocklyHooks.removeMeanHook(o);f(e,n,t)}catch(e){return e}};o.setProperty(n,"removeMean",o.createAsyncFunction(r));r=function(){try{return l.blocklyHooks.raw()}catch(e){return e}};o.setProperty(n,"getRawData",o.createNativeFunction(r));r=function(t,o){if(t.properties){var n=e(a).values(t.properties);l.blocklyHooks.plotRaw(n,!0,o)}else l.blocklyHooks.plotRaw(t,!1,o)};o.setProperty(n,"plotRaw",o.createNativeFunction(r));r=function(e){window.pan(e),console.log("PAN ",e)};o.setProperty(n,"testVar",o.createNativeFunction(r));r=function(e,o){t.innerHTML=void 0!==e?e:""};o.setProperty(n,"print",o.createNativeFunction(r));r=function(e,t){window.player.setVelocityX(e)};o.setProperty(n,"setVelocityX",o.createNativeFunction(r));r=function(e,t){window.player.setVelocityY(-1*e)};o.setProperty(n,"setVelocityY",o.createNativeFunction(r));r=function(e,t){window.player.x=e};o.setProperty(n,"setX",o.createNativeFunction(r));r=function(e,t){window.player.y=e};o.setProperty(n,"setY",o.createNativeFunction(r));r=function(e,t){try{return window.bands[t][e]}catch(e){return e}};o.setProperty(n,"getBandPower",o.createNativeFunction(r));r=function(e,t){try{return"score"==t?window[e][t]:window[e].position[t]}catch(e){return e}};o.setProperty(n,"getFacialData",o.createNativeFunction(r));r=function(e){try{return console.log("expression",e),window.expressions[e]}catch(e){return e}};o.setProperty(n,"getExpressionScore",o.createNativeFunction(r));r=function(){try{return`${window.lastSpeech}`}catch(e){return e}};o.setProperty(n,"getSpeech",o.createNativeFunction(r));r=function(e){try{window.synthesizeSpeech(e)}catch(e){return e}};o.setProperty(n,"speak",o.createNativeFunction(r));r=function(e,t,o){try{window.updateFace(e,t,o)}catch(e){return e}};o.setProperty(n,"updateFace",o.createNativeFunction(r));r=function(){try{return window.filteredSample}catch(e){return e}};o.setProperty(n,"getPhysio",o.createNativeFunction(r));o.setProperty(n,"highlightBlock",o.createNativeFunction((function(e){return function(e){window.workspace.highlightBlock(e)}(e=String(e||""))}))),initInterpreterWaitForSeconds(o,n)},window.runBlocklyCode=function(){if(console.log("latest Code: ",window.latestCode),window.workspace.highlightBlock(null),"block"==window.editorMode)window.interpreter=new Interpreter(window.latestCode,window.initApi);else{var e=window.textEditor.getValue();window.interpreter=new Interpreter(e,window.initApi)}window.runner=function(){window.interpreter&&(window.interpreter.step()?setTimeout(window.runner,10):window.resetInterpreter())};try{window.runner()}catch(e){return e}}};s.prototype.init=function(){window.generateCodeAndLoadIntoInterpreter(),window.workspace.addChangeListener((function(e){e instanceof Blockly.Events.Ui||(window.resetInterpreter(),window.generateCodeAndLoadIntoInterpreter())}))},window.runBlockCode=function(){null==window.interprete&&setTimeout(window.runBlocklyCode,1)}})),i.register("16nQR",(function(e,o){t(e.exports,"Toolbox",(function(){return n})),t(e.exports,"unwind",(function(){return r}));class n{toString(){let e='<xml style="display: none;">';return e+=r(this.modules),e+="</xml>",e}constructor(e){this.modules=e}}function r(e,t=!1){let o,n=t?"<xml>":"";for(let t of e)t.modules?(o=t,n+='<category name="'+o.name+'" colour="'+o.colour+'"',o.custom&&(n+=' custom="'+o.custom+'"'),n+=">",n+=r(o.modules),n+="</category>"):t.callbackKey?(o=what,n+=`<button text="${o.text}" callbackKey="${o.callbackKey}"></button>`):t.text?(o=t,n+='<label text="'+o.text+'"></label>'):void 0!==t.gap?(o=t,n+='<sep gap="'+o.gap+'"></sep>'):n+='<block type="'+t+'"></block>';return t&&(n+="</xml>"),n}})),i.register("3rELp",(function(e,o){t(e.exports,"Categories",(function(){return n}));const n={cat_logic:{name:"Logic",colour:"%{BKY_LOGIC_HUE}",modules:["controls_if","controls_ifelse","logic_compare"]},cat_loops:{name:"Loops",colour:"%{BKY_LOOPS_HUE}",modules:["controls_repeat","wait_seconds"]},cat_math:{name:"Math",colour:"%{BKY_MATH_HUE}",modules:["math_number","math_arithmetic","math_random_float"]},cat_sep:{gap:0},cat_data:{name:"Data",colour:330,custom:"DATA",modules:["plot_raw","getRaw"]},cat_vars:{name:"Variables",colour:100,custom:"VARIABLE",modules:[]},cat_list:{name:"List",colour:50,modules:["lists_create_empty","lists_create_with"]}}})),i("kcj9K")}();
//# sourceMappingURL=index.3d7ff278.js.map
